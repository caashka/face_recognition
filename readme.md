# Проект по распознаванию лиц (OpenCV + Python)

Данный проект реализует систему реального времени для распознавания лиц на основе алгоритма LBPH (Local Binary Patterns Histograms). Включает в себя скрипты для:  
1) Сбора датасета (dataset_creator.py).  
2) Автоматической или ручной тренировки модели (trainer.py).  
3) Распознавания лиц с веб-камеры или удалённого видеопотока (face_recognition.py).  
4) Управления процессом через меню (main.py).

## Возможности
1. Добавление нового пользователя и автоматическая тренировка модели.  
2. Ручная тренировка модели.  
3. Распознавание лиц с веб-камеры в реальном времени.  
4. Распознавание лиц на удалённом видеопотоке (задаётся URL).  
5. Ведение лога распознаваний (face_log.txt), где фиксируются дата, время и процент уверенности.

## Установка и запуск
1. Склонируйте репозиторий или скачайте файлы проекта.  
2. Установите все зависимости из requirements.txt:  
   pip install -r requirements.txt  
3. Убедитесь, что в папке с проектом присутствует файл [haarcascade_frontalface_default.xml](https://github.com/opencv/opencv/blob/4.x/data/haarcascades/haarcascade_frontalface_default.xml) (его можно взять из репозитория OpenCV).  
4. Запустите основной скрипт:  
   python main.py  

Далее в меню выберите нужное действие (1–5).

## Структура проекта
• main.py – Точка входа. Предоставляет консольное меню.  
• dataset_creator.py – Сбор датасета: создание папки для нового пользователя и захват его лиц с веб-камеры.  
• trainer.py – Тренировка или пересборка обученной модели (trained_faces.yml).  
• face_recognition.py – Распознавание лиц (с веб-камеры или потока), логирование результатов.  
• faces/ – Каталог, где по подпапкам хранятся изображения лиц каждого пользователя.  
• users.json – Хранит соответствие ID пользователя и имени.  
• requirements.txt – Перечень библиотек, необходимых для работы проекта.  
• face_log.txt – Файл лога распознаваний (создаётся автоматически).

## Быстрый старт
После установки зависимостей (см. выше) и запуска main.py:  
1. Выберите «1» (Добавить нового человека) – будет создан пользователь, соберутся его изображения и обучится модель.  
2. Выберите «3» (Определение лиц c вебкамеры) – протестируйте систему распознавания. Для выхода нажмите «q».

Если нужно распознавать лица по URL:  
• Выберите «4» – введите адрес потокового видео и (опционально) задержку между кадрами.

## Логи и результаты
• Все распознавания пишутся в face_log.txt (дата, время, имя пользователя или «Неопознанный», а также процент уверенности).  
• Для пересборки модели в любое время можно использовать пункт «2» (trainer.py).